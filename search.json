[{"title":"工作上让我引以自豪的两个项目","url":"http://cloudkey.github.io/2017/01/28/S2016E02/","content":"<p>[TOC]</p>\n<p>坐在家里的书桌前，晒着新年的第一缕阳光，闻着老妈拿手菜的香味，开始了《我的2016》系列的第二篇 – 工作上让我引以自豪的两个项目。</p>\n<p>还记得年前有一次和室友教授一起讨论关于工作加班的看法，室友是做APP后台开发，处于业务的前线，每周或者两周都会有版本更新任务，且经常受PM各种方案频繁变动的困扰，处在一种每天都很忙的状态，并且据他所说有时会重复性劳动，所以加班频频。<br>而我是做相对偏底层的存储开发，在百度两年多跟PM打交道甚少，所以并不能深刻理解室友说的“PM烦恼”，自然而然我就跟室友说起了我在百度的工作内容和状态，现在回想起来其实就是16年我自己最喜欢和热爱的两个项目。</p>\n<h2 id=\"数据流动-–-Flow\"><a href=\"#数据流动-–-Flow\" class=\"headerlink\" title=\"数据流动 –  Flow\"></a>数据流动 –  Flow</h2><h3 id=\"为什么需要流动？\"><a href=\"#为什么需要流动？\" class=\"headerlink\" title=\"为什么需要流动？\"></a>为什么需要流动？</h3><p>大家都知道我是做云存储相关开发，上游产品就是常年IOS效率榜第一位的百度网盘，各位上传到网盘的数据（图片／视频／音乐／文档…）最终都会落到我负责的这一层来，由我们进行相关的数据整理后并实现磁盘存储落地。<br>但是随着网盘的用户越来越多（亿+），用户的数据也呈爆发式增长，而我们将用户的数据存储在多个城市的机房中，多地存储有这么几个原因：</p>\n<ol>\n<li>防止单个机房出现问题，整个服务不可用。</li>\n<li>中国太大，华东华南华北华中等不同地方的网络差异太大，为了更好的用户体验，所以不同地方的用户访问尽量就近。</li>\n<li>配合公司整体机房部署的安排。</li>\n</ol>\n<p>但是这里有个问题，就是我们的数据不是说存在某个机房就永久不再动了，有时候也会因为机房退租，昂贵机房数据迁移附近廉价机房，冷热数据分离等原因，需要将我们的数据挪一挪地方，怎么实现呢？ – 那就需要我们有一套自动化数据流动系统，让我们的数据能够在全世界机房间自由的穿梭。</p>\n<h3 id=\"我们想要的是什么？\"><a href=\"#我们想要的是什么？\" class=\"headerlink\" title=\"我们想要的是什么？\"></a>我们想要的是什么？</h3><p>其实15年年底，我就已经实现了一个流动demo，可以将指定的数据从一个源地址搬到目的地址，并能够保证安全／可靠／一致性。但是实现完后还是有一些让人不爽的地方：</p>\n<ol>\n<li>触发流动这一步，需要通过部署各种脚本来实现，过程麻烦且维护成本较高，经常因为机器变动／性能不达标等原因，各种改改改！任务少还好，一旦多起来真会让人疯掉。</li>\n<li>流动完成后，做成功校验也是麻烦事，需要用脚本去check数据库中的状态，来确认是否流动成功。</li>\n<li>流动过程中不清楚进展如何，完成了多少，成功多少，失败多少，这些都是在全部结束之后再做一轮统计之后才知道。</li>\n<li>核心处理模块虽然已经具备搬迁能力，但是和上下游联动较差，新人接手或者同类型任务启动，需要重走一遍这些复杂的流程，横向展开成本较高。</li>\n</ol>\n<p>所以基于以上原因，15年过完农历新年回来之后，我就重新思考了一下整个数据流动。就是回答“到底想要把流动做成一个什么样的系统?”这个问题。<br>其实一直以来我对好项目的理解是：<strong>简单可依赖！</strong></p>\n<blockquote>\n<p>何谓“简单” ，首先重复的东西能用流程化的程序替代尽量不要用人工一遍遍redo；其次不需要或者不太重的尽量不要加，好的程序都是尽量做减法，而不是加法；平台化很重要，尽量让横向扩展更容易。<br>那么什么算可依赖呢？其实就是结果和质量的保证，这涉及到程序的算法，性能，以及各环节如何更好的契合。</p>\n</blockquote>\n<p>想好了我们的流动要做什么样子之后，我开始从上到下梳理各环节：</p>\n<blockquote>\n<p>Producer -&gt; Flow Core System -&gt; Sinan -&gt; Result Check<br>(生产者 -&gt; 流动核心系统 -&gt; 进度展示平台 -&gt; 结果校验平台)</p>\n</blockquote>\n<p>梳理完各环节之后，我开始写各环节的整体方案，并且在思考有没有可能和其他团队已有的平台合作。</p>\n<ol>\n<li><p>生产者：之前我们的任务触发都是脚本完成的，而我们团队有一个team是做Hadoop和Spark数据处理的，并且最近他们也正在做平台化支撑的事情，所以当时就萌生了利用他们将来的平台来做些事情，替代脚本反复这样搞来搞去。</p>\n<p>和数据组的同学聊过之后，我发现其实我们的Producer需求在他们那边可以很简单的实现，而且只需要学习一下简单的Spark Python，就可以自主开发部署运行，qps并发量／CPU核／启停等这些平台化操作，快速上手简单运维。</p>\n</li>\n<li><p>规划好Producer之后，核心系统这块准备计划将PHP架构迁移到Go，提高程序本身的并发能力；同时重构的时候，在将代码中非必要的复杂功能尽量砍掉，用其他的方案替代。</p>\n</li>\n<li><p>由于我们是做数据迁移系统，所以进度监控是必不可少的，而平时工作中了解到QA团队经常会有一些日志统计和数据安全校验任务，他们也许做过相关研究。抱着试试看我去找了他们QA的技术负责人聊了聊，没想到一拍即合，他们今年正有规划要过类似这样的平台，就这样我写了一个需求方案提给了他们，希望和他们合作完成一套相对通用的监控平台，造福整个云团队。</p>\n</li>\n<li><p>终于走到最后一块了，其实在想好前面的1/2/3之后，结果校验其实就很好做了，不用脚本去一次次请求校验了，直接将搬迁前后，我们数据库中的数据导出来做join，一对比之后就知道哪些成功哪些失败了，而join工作就可以交由强大的Spark计算完成，这也是Spark最擅长的技能了。</p>\n</li>\n</ol>\n<h3 id=\"天时地利人和\"><a href=\"#天时地利人和\" class=\"headerlink\" title=\"天时地利人和\"></a>天时地利人和</h3><p>其实一个系统顶层设计往往花费的精力最大，但是这一步至关重要，成也它败也它！所以在把各个环节想好之后，我拿出一张白纸，将一份最原子的数据文件流动过程画一遍，验证上面4个模块是否能够上下联动齐心合力完成任务，并且简单可依赖！</p>\n<p>在得出的结果是 <strong> Yes </strong>之后，我便将每个子系统的milestone详细列出来，并周期性地和各负责人沟通&amp;&amp;听取他们的反馈，一点一点像推并排的箱子一样跟进，Push着整个项目往前行走。</p>\n<p>随着时间进度条的移动，Q2结束的时候，Spark集成平台Horus终于问世了，作为第一个吃瓜的小白，在向技术负责人取经后，便将我们的测试任务部署在Horus平台上了。在联调的过程中，根据我们的场景需求Horus开发了一些通用及人性化的功能，而Flow也在不断的打磨。差不多两周过后，基本达到了当初的设想。</p>\n<blockquote>\n<p>PS: Horus问世后，我在上面花了几周的时间熟悉玩转，发现真是一大利器啊，特别适合我们这种需要大规模计算的场景。所以，我便在不同的场合和聊谈中，向兄弟团队们大力推荐，并邀请了Horus的负责同学做了一场公开分享，好技术好平台，大家用起来说好才是真的好哇！</p>\n</blockquote>\n<p>Horus能用了，Flow ready蓄势待发，Sinan也传来了好消息，16年的 Q1+Q2 是POMS Flow从 <strong> 设想 -&gt; 推敲 -&gt; 实现 -&gt; 问世 </strong> 的元年，而这中间真的是天时地利人和的结果，缺一不可，真的很幸运，我见证了你的诞生。</p>\n<h3 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h3><p>Flow上线正式运行之后，偶尔下午茶的时候，看着各平台上运行的任务，脑海中不自觉的就浮现出我们的数据在全国各地到处穿梭旅行的画面，从北到南，天际遨游！</p>\n<p>有时也会去找之前合作的各模块负责人小聊一下当下运行的状况，以及他们各自平台之后的规划和想法，话语之间还能想起那段合作Flow的时光。</p>\n<blockquote>\n<p>我又不自觉的想感谢一些同学了，哈哈哈～！<br>Horus之父的彬彬同学，是你让Horus“输出能力，不输出人力”，为我们打造了一款即使是Spark小白也能够轻而易举得使用其强大的计算和统计技能。<br>Sinan的梦想家，熙熙和娅静同学，为我们庞大的数据系统团队，带来了一盏指明方向的灯塔，照亮航行的路线。<br>当然还有我们可爱的POMS兄弟们，为你们点赞！没有你们，就不可能有Flow。</p>\n</blockquote>\n<h2 id=\"资源管理-–-Capricus\"><a href=\"#资源管理-–-Capricus\" class=\"headerlink\" title=\"资源管理 – Capricus\"></a>资源管理 – Capricus</h2><p>其实做云方面的开发很有意思，就是它的数据量会很大并且在不断增长，我们都知道量变会引起质变，所以我们的系统需要不断应对庞大数据量带来的各种挑战！</p>\n<p>当我们的POMS能够独当一面的时候，其实还是面对一些Challenge：</p>\n<blockquote>\n<ol>\n<li>资源需求差异化大：在线／离线／单次／批量；</li>\n<li>资源多样化：底层文件存储资源／DB资源／计算资源／网络资源／Cache资源；</li>\n<li>资源审计难：对资源的使用情况缺失审计环节；</li>\n<li>资源分配合理性差：业务无优先级概念，当资源不足时，无法保证高优先级业务的资源需求；未区分低峰高峰时段，低峰时段资源利用率低；</li>\n<li>系统稳定性风险高：各业务各自为战，不顾及大局，单业务耗光某个底层资源时，拖垮整个系统。</li>\n</ol>\n</blockquote>\n<p>还有一种说法，做云系统 “运维”是关键，当然这里的运维不是单纯的机器运维，还包括资源的整体调度和协调，各方各面都要相互配合，在一个大池子下完成更多事情。</p>\n<h3 id=\"我们的愿景\"><a href=\"#我们的愿景\" class=\"headerlink\" title=\"我们的愿景\"></a>我们的愿景</h3><ul>\n<li>各层次资源全局统一调度：审计、分配、使用、回收；</li>\n<li>各业务逻辑划分优先级，资源分配的时候考虑优先级因素；</li>\n<li>各层资源利用率最大化。</li>\n</ul>\n<blockquote>\n<p>POMS的未来在无限的远方，Resourcer的征途是星途大海。</p>\n</blockquote>\n<h3 id=\"名字的由来\"><a href=\"#名字的由来\" class=\"headerlink\" title=\"名字的由来\"></a>名字的由来</h3><p>做系统的同学都有一个共同的感受，就是每当遇到给新系统取名字的时候，就比较犯愁了。因为名字一方面要好记，另一方面也要跟系统的功能和定位有关，所以每每起名字都是一件技术活啊。。</p>\n<p>为了解决这一困扰了我们很久的难题，无意一次我在维基百科中看到了宇宙中关于<a href=\"https://zh.wikipedia.org/wiki/%E6%98%9F%E5%BA%A7#.E7.8E.B0.E4.BB.A3.E5.85.AB.E5.8D.81.E5.85.AB.E6.98.9F.E5.BA.A7\" target=\"_blank\" rel=\"external\">星座</a>的划分，就这样我们可以根据各自系统的角色，在茫茫天际中找寻与之匹配的那一颗星座了。</p>\n<p>最终给我们的资源管理系统敲定了Caprinus，来源于Capricornus一词：</p>\n<blockquote>\n<p>Capricornus: 摩羯座亮星组成一个倒三角形结构，古人将其称为“神仙之门”，认为从地上各种名利是非解脱出来的人，其灵魂就可以通过此门登上天国。用此星座代表着二级组件通天入地的连接一级组件和POMS各个模块，守护着我们的底层各类资源。</p>\n</blockquote>\n<h3 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO\"></a>TODO</h3><p>目前系统还处在开发阶段，后续上线之后，再来聊一聊开发过程中遇到的那些事，尽情期待…</p>\n","categories":["work"],"tags":["my2016"]},{"title":"16年耗费我最大精力的买房经历","url":"http://cloudkey.github.io/2017/01/25/S2016E01/","content":"<p>[TOC]</p>\n<p>坐在鹏寰的工位上，听着小提琴优美的弦乐，周边同事一个个拎着包推着行李箱返乡离开，才发现16年就这么悄然的过去了。由于没抢到提前的车票，所以要坚持到最后一天，站好最后一班岗。<br>本来今年计划养成写Blog的习惯，可是没有坚持下来，中间断了篇，在此反思羞愧啊！不过心里一直想写一些东西记录下伴随着我成长的点点滴滴，这一点没有改变，希望17年能够养成这个习惯吧。</p>\n<p>早晨到了工位，花了几分钟，忆海拾贝了下16年一些值得记录的片段，希望以此作为对于即将逝去的2016的一种告别吧。<br>简短的梳理了下，此篇作为 &lt;&lt;我的2016&gt;&gt;系列的开篇，后续如果有想起来其他的主题再做补充。</p>\n<blockquote>\n<ol>\n<li>16年耗费我最大精力的买房经历</li>\n<li>工作上让我引以自豪的两个项目</li>\n<li>喜出望外中签WMM东京马拉松</li>\n<li>消费脱敏与浅谈玩转信用卡</li>\n<li>第一次出国越南芽庄的难忘之旅</li>\n<li>纪念邻居爷爷 – 怀念那段口述历史的岁月</li>\n<li>读书的那些趣事 – 世界在我心中，我在世界中心</li>\n<li>16年最爱的德扑游戏</li>\n<li>17年的习惯与计划</li>\n</ol>\n</blockquote>\n<p>要说16年最难忘也是最耗费我心力的是什么？买房无他！<br>都说90后是最惨的一代，高考人多竞争激烈，不靠父母北上广买房基本无望。房子在中国承载了太多太多，以前读研的时候就知道北京的房价很高，但只是一个概念而已，没有更多深刻感受。工作两年期间，看到周边同事同学各种买房事迹，听到他们的各种聊各种抱怨，每次都是一句“北京房价专治各种不服”完美收场。</p>\n<p>确实，在这片土地上，曾经的仰望星空梦想一次一次被蹭蹭的房价柔腻，你会发现周边工作2-3年的年轻同事，脸上的无奈和心里的焦虑感每当谈起房价时都若隐若现。16年我亲身经历了全国一二线城市的各种暴涨，而我也加入了买房大军，这半年渗透着烦躁，汗水，信息整理追踪，多次往返北京合肥，抢抢抢，到最后尘埃落定，历经半年多，其中也发生了很多有趣的事情。其实想一想我们这一代也是这个时代的见证者，虽比不上民国战争年代那样璀璨夺目，但若干年后回首肯定也是一番别样滋味。所以，我很幸运，处在这个最好的也是最坏的时代！</p>\n<h2 id=\"为什么要买房？\"><a href=\"#为什么要买房？\" class=\"headerlink\" title=\"为什么要买房？\"></a>为什么要买房？</h2><p>其实在中国，普通大众的投资渠道还是比较少的，炒股、买房、理财产品大概就这些了，而这两年有一个很明显的感觉 就是手里的钱越来越不值钱了，工作两年多手里有一点存款，其实就是躺在各种宝上的一堆数字而已，收益勉强跑赢CPI。而房子在中国人心里是实物，有一种踏实感，即使贬值也能自己居住，另外现实是房子在近10年也算最保值的了。<br>所以，当时的想法是买一套先，至少我是刚需，以后肯定需要房子的，而现在每个月的公积金还贷还是没什么压力的，所以先迈过刚需的门槛，有一种“手里有房，心理不慌”的满足感吧，还有就是下一个5年至少不会为房子再烦恼了，有一些事情早做能为以后省很多麻烦，趁现在年轻精力还比较旺盛。</p>\n<h2 id=\"准备阶段\"><a href=\"#准备阶段\" class=\"headerlink\" title=\"准备阶段\"></a>准备阶段</h2><p>大概是15年年底正式决定要买房的吧，刚开始我也是什么都不懂，什么样的房子算好的房子？在哪个城市买？怎么买？买新房还是二手？等等这些都是一窍不通，而买房也是算普通人为数不多的几次花大钱的时候，平常花小钱的时候不用care细节，但是像买房这种还是需要精打细算的。<br>首先有几个需要先定下来：</p>\n<ol>\n<li>在哪个城市买？</li>\n<li>买新房还是二手？</li>\n<li>房款能接受的范围？</li>\n</ol>\n<ul>\n<li>其实若是3年前我有能力买房的话，我应该会在北京买，无论是投资还是保值北京都是最好的，但是16年年初开始北京的房子已经对普通家庭关门了，所以只能转而到二线城市买了。<br>而我家在六安，离我家最近的大城市就是合肥了，合肥这5年的发展相当迅猛，城市基础建设相关配套都已走上正轨，所以初步决定在合肥购买。</li>\n</ul>\n<p><img src=\"/images/hefei_2.jpg\" alt=\"hefei_2.jpg\"></p>\n<p><img src=\"/images/hefei_1.jpg\" alt=\"hefei_1.jpg\"></p>\n<ul>\n<li>如果是在北京买估计只能买二手的了，北京新房一少二难买，但是如果是其他城市的话，新房较多，而且又是第一套，无论是自住还是税收方面，新房都是比较好一点的。</li>\n<li>由于每个城市的首付比例包括贷款利率都不一样，所以定下城市后，需要去确认下这个城市的购房政策。去除首付后，就是你的贷款总额，百度一个贷款利率计算器，就可以知道每个月需要还贷多少米，根据自身情况，这样反推出能接受的房价总额。</li>\n</ul>\n<h2 id=\"信息整理和追踪\"><a href=\"#信息整理和追踪\" class=\"headerlink\" title=\"信息整理和追踪\"></a>信息整理和追踪</h2><p>决定在合肥买之后，我开始着手研究合肥区域情况，包括各个区的位置，发展定位，交通等等。<br>合肥一共9个区，政务区发展最成熟环境位置都属上乘；其次是大热门的滨湖，新区建设现代化省府所在地，未来合肥第一重点发展区域；蜀山包河庐阳之前的老城区，商业学校配套成熟，生活方便；高新一些科技公司的所在地，自然环境不错，但位置较偏学区是软肋；经开瑶海新站合肥最老的城区，之前的繁华市中心现在发展较滞后。</p>\n<p>了解一番之后，我将精力投入了政务，滨湖，蜀山，包河，高新这几个区，然后16年的清明，五一，端午三顾合肥，实地感受这几个区的情况，建议买房之前还是要去实地转一转，网上的信息图片跟实地感受还是有差别的，比如之前滨湖在我想象中可能是一片现代化各种好，但是实地去过之后还是有一些我不太喜欢的地方，例如房子盖得太过稠密，以后等人都搬过来之后势必会各种堵。</p>\n<p>再说政务，政务的环境是我最喜欢的，整洁人不是很多，天鹅湖周边自然环境也很赞，第一次去政务给我留下了深刻的印象，无奈当时政务在售的新房已经基本没了，二手房的价格也是合肥最高的，超过了我的预算，所以只能放弃。</p>\n<p><img src=\"/images/zhengwu_3.jpg\" alt=\"zhengwu_3.jpg\"></p>\n<p><img src=\"/images/zhengwu_1.jpg\" alt=\"zhengwu_1.jpg\"></p>\n<p><img src=\"/images/zhengwu_2.jpg\" alt=\"zhengwu_2.jpg\"></p>\n<p>五一朋友开车带我去滨湖逛了两天，看了不少楼盘，当时有几个比较倾向的，像保利海上五月花，联投中心书城，皖新朗诗绿郡，中海滨湖公馆等。但是当时我去的时候，整个滨湖是处于一种疯狂的抢房状态，想买到房只有几种途径，一是给几十万的号头费（就是出钱买购房的资格），二是找很硬的关系走内部渠道购买（这里需要非常过硬的背景关系，一般的小领导基本不用考虑了，至少需要市委级别的或者省级的），最后一种就是自己各种认筹各种跑自己打听开盘消息。我是属于第三种的那一类小白，不过最后滨湖的几乎所有楼盘在上半年都不怎么放量，放出来的基本都是关系户买走了，所以耗时了几个月最终没有买到滨湖，最后对滨湖也无爱了，就这样放手之。</p>\n<p>16年合肥全城处于疯狂的抢房状态，如果不是亲身经历，说起来估计大家都不相信或者无法理解，就连我在合肥市区打车，司机师傅都能跟你大聊特聊房子123。<br>慢慢的，随着暑假的到来，我内心也从焦躁、抱怨、无奈开始变得淡然，坦然，大不了买不到今年不买了。后面，我只留意着高新区的几个新楼盘，包河区高铁站附近，蜀山区由于新房不多所以关注的少。暑假跟着大学室友开车又去了高新实地走了走，一路上听着他讲述两年前他一个人跑遍合肥大街小巷买房的经历，想一想买房的孩子都不容易啊。后面包河的几个楼盘也顺道去看了，比较中意信达天御，绿地御徽装修风格不太喜欢而且价格2W+，后来就让我妹帮我认筹了信达天御，等待着开盘的消息。</p>\n<p>在这期间我加了很多合肥买房的QQ群，每天在北京留意着合肥的新房动态，各种买房网、APP刷啊刷，Mac上的备忘录记录着我比较中意的楼盘信息。其实筛选楼盘一开始我也是啥也不懂，逛论坛看评论，慢慢也摸到了其中的门路，无非就是几个因素：</p>\n<blockquote>\n<p>地段，交通，环境，开发商，学区，地铁，离工作地点远近，户型，价格，容积率，车位</p>\n</blockquote>\n<p>然后按照对这几个因素的看重比例，就是你最在意哪几个因素，在众楼盘里筛选出你要的！当然，很难做到这些因素全部让你满意，除非不差钱，当然我也比较推崇那句话“只要不是太过，在你力所能及里，买最好的不会错”。</p>\n<p>这其中还有个插曲，就是当时我看中了高新区的保利西山林语洋房，真是喜欢啊，整个小区只有洋房和别墅，自然环境居住一品，当时最后开盘的时候差点就出手了，可惜最终还是没有下手，因为价格确实有点高了，每个月还贷近小1W，压力不小。但是我还是比较看好洋房别墅的，以后人的生活肯定是越来越好，对居住要求也会越来越高，加油吧，争取以后尽早升级换洋房别墅！哈哈哈～</p>\n<h2 id=\"等到你\"><a href=\"#等到你\" class=\"headerlink\" title=\"等到你\"></a>等到你</h2><p>转眼到了暑假，由于我在买房QQ群里和房友聊高铁板块的绿地御徽时，有一天突然一个不认识置业顾问单Hi我，给我推荐龙川路板块的恒大水晶国际广场楼盘，说近期会有推盘。龙川路板块之前由于新房较少所以关注不是很多，出于好奇我就去研究了一下恒大的这个楼盘，包括位置，楼盘情况（容积率，楼间距，户型，精装修标准等），周边其他楼盘行情，地铁&amp;&amp;周边配套，有无学区，以及研究了一下恒大在合肥之前的几个楼盘口碑和龙川路在合肥市规划里的定位等等。</p>\n<p>一番研究下来，首先龙川路以后在合肥定位是高端楼盘聚集地，也是几大核心发展区域，并且周边的楼盘地价都已经1.3W+了，为什么说周边楼盘很重要呢？因为，一是涉及到你的邻居整体素质，二周边楼盘行情也是未来你的楼盘参考坐标之一。加之有市重点规划，未来至少有政策方便的红利。</p>\n<p>其次，楼盘位置离政务核心区仅隔一条马路，步行十分钟到达华润万象城，万达，离天鹅湖也不远，可以说周边的商业和休闲运动氛围都已成熟。</p>\n<p>接下来楼盘自身情况，容积率2.5，楼间距45-60米，户型完美的客厅+两个卧室都朝南（建筑面积有90，103，113，127这四类，比较满足首套选择范围）。</p>\n<p>之前研究过合肥的地铁情况，合肥在建的地铁有1，2，3号线，1号线16年年底通车，未来合肥进入地铁时代，所以说地铁也是买房的考虑因素之一了。不过恒大这个楼盘离最近的地铁站大概有3公里，完全没有地铁优势，不过楼盘处在交通便捷的龙川路，开车去那都是四通八达，去滨湖开车20分钟，去高新也不远，可谓地利。</p>\n<p><img src=\"/images/hefei_subway.jpg\" alt=\"hefei_subway.jpg\"></p>\n<p>买房还有一个不成文的重要因素，那就是学区，说它不成文，因为国家所有的正式红头文件里从没有承认过有学区房这么回事，但是按区择校在全国各大小学初中都已实行了多年，而有没有资格上心仪的小学初中，判断标准就是有无学校承认辖区内某些楼盘的房产证，就这么简单粗暴！另外，学区这个事还有一些需要注意的地方，有些楼盘跟当地教委签的协议可能就只有3年，5年，7年这样，意思就是这个楼盘入学的资格只有3-7年，有效期过后就不再拥有入学资格了，这个在买房前一定要研究清楚，当时合肥就有这样的楼盘。</p>\n<p>龙川路当时一共有7个楼盘，号称“龙川七子”，恒大水晶处于龙头的位置，但是其他6个楼盘都还没破土动工，只有恒大开始打地基了，所以当时的学区还是之前的老学区，在合肥属于很差的学校，但是周边有很多高端楼盘，估计未来合肥市政府会重新规划龙川路的学区。如果未结婚的话小孩子上学可能不是那么急迫，学区这个因素可能就不是最重要的了，而且学区有个特点就是隔几年就会重新划分一次。当然自带好的学区的话，那自然最好，因为在房价跌的时候，有好学区的话抗跌能力最强了，因为教育资源是有限的，凡是有限的资源必会出现市场行为，其他行业亦如此。</p>\n<p>一番综合考虑下来，恒大水晶还是比较符合我内心的标准的，所以就让我妹帮我去认筹了一个资格，置业给的放风价是1.8-2万，有点超过我的预期了，但是当时合肥有机会买的楼盘非常少，所以当时的考虑是先认个筹，等正式价格出来再做最后决定。<br>开盘前我又去了趟合肥，亲自去龙川路走了一番，确认过后，决定如果价格不是那么离谱的话，就出手了。就这样，我返回了北京，等待着推盘的那一天。</p>\n<h2 id=\"出手\"><a href=\"#出手\" class=\"headerlink\" title=\"出手\"></a>出手</h2><p>8月中下旬的某一天，恒大置业顾问发来微信，说近期会推盘，让我准备好材料和首付款，具体哪一天追问后说是不出意外的话就定在了8月底的最后一个周末了。之后，我便将购房材料一项一项收集准备，首付款也集结到位。</p>\n<p>没过两天，恒大水晶的备案价终于千呼万唤始出来，单价1.6-1.8，均价1.7 一房一价（好楼层贵一点差楼层便宜一点），低于放风价，购房者的热情又一次被燃起来了。这里不得不说恒大真是聪明，吊足了购房者胃口后，低于预期价一次全部推完八栋，对比两个月之后国庆限购新政出来之后，简直是先行先知者。</p>\n<p>8月底我请了一天假，做足了准备返回合肥，住在小强家，并在开盘前夜，和他、我妹，一起研究了8栋楼所有户的价格，拿出纸笔一通对比之后，筛选出我想买的房间号，并按照优先级依次排列，因为之前过来人的经验告诉我，进入选房区后只有不到1分钟的选房时间，用抢房形容一点也不夸张。</p>\n<p><img src=\"/images/home_priority.jpg\" alt=\"home_priority.jpg\"></p>\n<p>第二天天还没亮我就和小强起来了，希望能赶个天时碰个好运。当天，恒大开盘选在滨湖的会展中心举行，场地非常大，现场足足去了2K+的人，而房子只有800套，可想而知，肯定会有人买不到。进入会场前，工作人员会给每个购房者带一个号码手环，这个号码就是一会电脑摇号后进入选房区的凭证，就跟买彩票的玩法差不多。</p>\n<p><img src=\"/images/start_selling_1.jpg\" alt=\"start_selling_1.jpg\"></p>\n<p><img src=\"/images/start_selling_2.jpg\" alt=\"start_selling_2.jpg\"></p>\n<p>耐心的看完一堆广告视频之后，便开始了紧张的电脑摇号环节，每一组摇出20个号，依次进入选房区选房，800套房也就是40组，真别说，当时摇号的时候心里真有点小紧张，毕竟是第一次体验这样的买房方式。主持人一遍又一遍的念着摇到的号码，可惜一直没有我的号，眼看着已经过半，就是说800套只剩下400套了，当时我妹买的早点我都没心思吃了，确实有点失落啊，到最后我实在坐不住了，站在选房区门口就等着念到我的号，我就直接冲进去了。没想到，刚站在门口没多久，就喊到了我的号码，唰唰唰我就跑了进去。</p>\n<p>进去之后，两面墙上全是各栋楼的售出情况，由于我进去的非常靠后了，所以基本没有好楼层了，昨晚我中意的十个优先级的房间号，只剩下最末尾的几套房间还没被抢完，无奈，当时真不知道怎么办了。。。便打了小强的电话，沟通一番后，决定还是先买下来（因为恒大还有一个协议就是无条件退房），最终定了2层的东边户。</p>\n<p>出来后，第一时间给萌打了电话，她并没有一点失落的心情，反而安慰我说能买到已经很不容易了，想一想好多没买到的，已经算还是有点幸运的了，抬头望着滨湖的阳光，此时心里感觉突然一块大石头终于落地了，好轻松那会，历经了6个月的买房路程，终于走完了。门外老爸老妈二叔三叔表叔，一家人全都来了，给我打气加油，虽然买房历程艰辛，但是有家人的支持和理解，心里真的很暖。<br>其实我也要感谢“买房”，这期间我认识了萌，她陪我一起看房陪我走过这段属于我们这一代的买房路，在漫漫的买房路上并不孤独！谢谢你的陪伴！就这样，我们开始了交往，踏上了下一段不同风景的路程。</p>\n<h2 id=\"收尾\"><a href=\"#收尾\" class=\"headerlink\" title=\"收尾\"></a>收尾</h2><p>在定完房签完现场预备合同之后，回到售楼中心，签正式购房合同、贷款合同和交首付款，银行的贷款人员都来了现场办理，基本全是一条龙服务。后面就是等着贷款下来每个月还贷，还有就是首付款发票下来之后，准备一堆材料提取公积金了，至此为期半年的买房路程算是圆满结束了。<br>放一张我买的房子前段时间封顶的图片吧，离合肥南站不是很远，等交房后，下次大家路过合肥欢迎来做客哈～</p>\n<p><img src=\"/images/home_done.jpg\" alt=\"home_done.jpg\"></p>\n<h2 id=\"致谢\"><a href=\"#致谢\" class=\"headerlink\" title=\"致谢\"></a>致谢</h2><p>这半年，一路上经历了太多，不知道坐了所少次北京往返合肥的夜间卧铺，不知道微信上走了多少步，各种网站APP信息不知道浏览了多少遍，Mac上的备忘录写了一篇又一篇，因为买房电话微信通话了多少分钟。。。</p>\n<p><img src=\"/images/hot.jpg\" alt=\"hot.jpg\"></p>\n<p><img src=\"/images/hefei_railway_station.jpg\" alt=\"hefei_railway_station.jpg\"></p>\n<p><img src=\"/images/hefei_south_railway station.jpg\" alt=\"hefei_south_railway station.jpg\"></p>\n<p><img src=\"/images/wait_for_bus.jpg\" alt=\"wait_for_bus.jpg\"></p>\n<p>此刻【2017/1/26 农历腊月29】坐在北京-六安的高铁上，写完《我的2016》系列开盘 之 “16年耗费我最大精力的买房经历”，真是回首望，多少往事历历啊，买房的那些画面，即使已经过去了5个多月了，仍历历在目。</p>\n<p>而即使在没有什么人浏览的个人博客里，我仍然想在这里，感谢这一路上陪伴我帮助过我的老同学，老朋友，家人，同事，还有买房期间认识的一些新朋友，谢谢你们！他们是：我的大学同学刘臣君，大学同学刘文雯，大学研究生同学陈婷婷，研究生同学柴阿龙，高中大学同学费成志，因买房重新认识并开始交往的萌，我的老妹杨骏青，老妹男朋友王强，王强的室友亮亮，在合肥的小姐小姐夫，陪我看了一整天房的崔苗，置业顾问张燕徐晓梅张爱平，大哥一家，小哥一家，大姨大姨夫，小舅一家，老爸老妈，二叔三叔表叔和他们的家人，还有PCS可爱的同事们和801的室友们，再次谢谢你们！谢谢～！</p>\n","categories":["life"],"tags":["my2016"]},{"title":"当我跟别人介绍跑步时 我介绍些什么 Season Two","url":"http://cloudkey.github.io/2015/12/20/What I introduce When I introduce run Season Two/","content":"<p>在Season One中，主要是介绍一些跑步的前奏序曲以及相关入门内容，这一季主要介绍准备活动，跑步的方法，拉伸动作，还有跑步可能会带来的一些伤痛，让我们回归跑步本身。</p>\n<a id=\"more\"></a>\n<p>[TOC]</p>\n<h2 id=\"怎么跑\"><a href=\"#怎么跑\" class=\"headerlink\" title=\"怎么跑\"></a>怎么跑</h2><p>整个跑步过程前前后后包括：</p>\n<blockquote>\n<p>跑步姿势矫正 -&gt; 准备活动 －&gt; 跑前适应 -&gt; 跑速 -&gt; 持续时间 -&gt; 频率 -&gt; 补给。</p>\n</blockquote>\n<p>这一节的内容主要参考之前写的 &lt;&lt; NB慢跑课堂随手记 &gt;&gt;，主要是针对平时LSD的一些注意点，而跑全程马拉松的时候，我再合适的地方再补充。<br><a href=\"http://cloudkey.github.io/2015/11/08/nb-lsd\">NB慢跑课堂随手记</a></p>\n<p>针对已经具有一定经验的炮友来说，合理的规划平常的训练节奏，科学的制定每次参赛策略，才是一条可持续发展道路。<a href=\"http://bbs.running8.com/plugin.php?id=run_calculator:run_calculator\" target=\"_blank\" rel=\"external\">跑步计算器</a> 可以根据设定的目标，给出详细的数据分析以及训练的配速建议，感兴趣的小伙伴们可以玩一玩。</p>\n<h2 id=\"跑之后\"><a href=\"#跑之后\" class=\"headerlink\" title=\"跑之后\"></a>跑之后</h2><p>刚跑完步，不要立即停下来坐卧或者饮食，最好先慢走一段时间，将心率降到100以下，然后可以做一些跑步后的伸展活动，有利于恢复和放松身体的各个部位。</p>\n<p><img src=\"/images/after_run_0.jpg\" alt=\"after_run_0.jpg\"></p>\n<p><img src=\"/images/after_run_1.jpg\" alt=\"after_run_1.jpg\"></p>\n<p><img src=\"/images/after_run_2.jpg\" alt=\"after_run_2.jpg\"></p>\n<p><img src=\"/images/after_run_3.jpg\" alt=\"after_run_3.jpg\"></p>\n<p><img src=\"/images/after_run_4.jpg\" alt=\"after_run_4.jpg\"></p>\n<p><img src=\"/images/after_run_5.jpg\" alt=\"after_run_5.jpg\"></p>\n<p><img src=\"/images/after_run_6.jpg\" alt=\"after_run_6.jpg\"></p>\n<p><img src=\"/images/after_run_7.jpg\" alt=\"after_run_7.jpg\"></p>\n<p><img src=\"/images/after_run_8.jpg\" alt=\"after_run_8.jpg\"></p>\n<h2 id=\"跑之痛\"><a href=\"#跑之痛\" class=\"headerlink\" title=\"跑之痛\"></a>跑之痛</h2><p>经常跑步的同学或多或少都会遇到一些伤痛，伤痛并不可怕，只要我们正确的认识它，了解它，再掌握一些治疗的科学方法，相信跑友们都能开心的跑，科学的跑，健康的跑。</p>\n<p>美国斯坦福大学公开课《跑步损伤:预防与治疗》，非常专业的讲解，基本涵盖了跑步中损伤的方方面面，对广大跑步爱好者具有很高的参考价值，建议收藏观看。<br><a href=\"http://open.163.com/movie/2010/12/H/P/M6UVR31IR_M6V0ANDHP.html\" target=\"_blank\" rel=\"external\">跑步损伤：预防与治疗</a></p>\n<p>知乎上也有一篇强大的黑科技知识文章，<a href=\"https://www.zhihu.com/question/20465423\" target=\"_blank\" rel=\"external\">跑步伤痛的种种</a></p>\n","categories":["run"],"tags":["run introduction"]},{"title":"当我跟别人介绍跑步时 我介绍些什么 Season One","url":"http://cloudkey.github.io/2015/12/06/What I introduce When I introduce run Season One/","content":"<ul>\n<li>题目启发于村上大叔的《当我谈跑步时 我谈些什么》，诚然还达不到像村叔一样谈跑步谈人生谈理想，故用“介绍”二字，记录下自己真实的跑步感受和了解到的一些入门的跑步知识。<br>(卡佛句式：继海明威之后美国最具影响力的短篇小说作家卡佛的一個短篇小說叫做《當我們談論愛情時，我們在談論什麽》)</li>\n</ul>\n<p>[TOC]</p>\n<p>  大概从去年（14年）5月份的时候我开始跑步，到现在将近两年的跑龄了，今年上半年以来，脑子一直构思着想写些什么，因为经常会有一些想要记录下来的零星片段或者些许感受，进而想整理一番。而在读完村上大叔的 <a href=\"http://book.douban.com/subject/4872222/\" target=\"_blank\" rel=\"external\">当我谈跑步时 我谈些什么</a> 一书之后，感同身受之余，就决定将这两年的跑步历程以及在这过程中了解到的一些跑步知识整理出来，和喜欢跑步的小伙伴们一起分享。</p>\n<a id=\"more\"></a>\n<h2 id=\"为什么跑步\"><a href=\"#为什么跑步\" class=\"headerlink\" title=\"为什么跑步\"></a>为什么跑步</h2><p>去年4月研究生毕业，加入我度成为一名正式员工，但在这之前，我已经在现在的团队实习3个多月了，短短的几个月时间，就发现自己的身体有点不对劲（虚胖，也不爱动，经常染些小病小灾），当时心想这才刚开始工作啊，身体这么弱怎么行（干革命也得有本钱啊），加之在学校的时候也没给身体留个好底子（基本不锻炼），思之再三，终于下定决心，找一项运动来锻炼锻炼身体。</p>\n<p>选来选去，觉得跑步最简单了，因为离首体和我邮都很近，现成的操场，所以换个短裤，随便找了一双运动鞋，就去了。</p>\n<p>而第一次在操场跑的场景至今都还记忆尤深，基本跑个三四圈就开始不行了，大汗 -&gt; 喘 -&gt; 抬不动腿 -&gt; 累成狗，就是这样一副德行，让自己认识到身体差成什么样了，so I’m start run!</p>\n<p>确实，跑步不管是减肥还是锻炼身体，都有着天然的优势：</p>\n<blockquote>\n<p>首先不需要对手或者说合作者，自己想去就可以去；<br>也不需要特殊的器具；<br>更不必特地赶赴某个特别的场所；<br>只要有一双适合跑步的鞋，有一条马马虎虎的路，当然在帝都还需要一个好天，就可以在兴之所至时爱跑多久就跑多久。</p>\n</blockquote>\n<h2 id=\"跑之前\"><a href=\"#跑之前\" class=\"headerlink\" title=\"跑之前\"></a>跑之前</h2><h3 id=\"小调研\"><a href=\"#小调研\" class=\"headerlink\" title=\"小调研\"></a>小调研</h3><p>想先调研一下小伙伴们每年对自己的身体 <strong>投资</strong> 多少</p>\n<ul>\n<li>包括健身房，运动装备，旅行，比赛，花费的时间，相关书籍等等，这里用投资一词，因为觉得是有“回报”的，年轻时可能感觉不到那么多，但是随着年纪增长，一定会越来越明显，相反省下来的钱将来很可能会无私的捐赠给医院。</li>\n</ul>\n<h3 id=\"一些跑步术语（常识脑补）\"><a href=\"#一些跑步术语（常识脑补）\" class=\"headerlink\" title=\"一些跑步术语（常识脑补）\"></a>一些跑步术语（常识脑补）</h3><p> <img src=\"/images/before_run_0.jpg\" alt=\"before_run_0.jpg\"></p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">基本术语:</div><div class=\"line\"></div><div class=\"line\">     有氧跑: 在运动中，人体会利用氧气来氧化糖原或脂肪，产生能量。当你的速度较慢时，吸入的氧气可以让糖原或脂肪完全氧化。</div><div class=\"line\">     </div><div class=\"line\">     无氧跑: 当你的速度足够快时，这是吸入的氧气相对不足，糖原未能完全氧化，有一部分不通过氧化直接转化成能量，这个过程叫无氧代谢。这种运动会在体内产生过多的乳酸，导致肌肉疲劳不能持久，运动后感到肌肉酸痛，呼吸急促。</div><div class=\"line\">     </div><div class=\"line\">     落脚方式/Foot Strike: 跑步时脚触地的方式。一般有前脚掌着地、全脚掌着地和脚根着地。多数人认为前脚掌着地更好，但目前并无定论。</div><div class=\"line\">     </div><div class=\"line\">     配速/Pace: 一般指跑步时每公里的用时。例如跑<span class=\"number\">1</span>公里用时<span class=\"number\">4</span>分<span class=\"number\">30</span>秒，则称为<span class=\"number\">430</span>的配速；<span class=\"number\">5</span>分<span class=\"number\">05</span>秒，<span class=\"number\">505</span>配速。</div><div class=\"line\">     </div><div class=\"line\">     Mile: 英里，英美等国使用的长度单位。<span class=\"number\">1</span>英里约等于<span class=\"number\">1.6</span>公里。</div><div class=\"line\">     </div><div class=\"line\">     马拉松/Marathon: 这个没人不知道吧。全程马拉松具体长度<span class=\"number\">42.195</span>公里，或<span class=\"number\">26.2</span>英里；半程马拉松<span class=\"number\">21.0975</span>公里，或<span class=\"number\">13.1</span>英里。</div></pre></td></tr></table></figure>\n<p> <img src=\"/images/before_run_1.jpg\" alt=\"before_run_1.jpg\"></p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">跑步方式:</div><div class=\"line\"></div><div class=\"line\">     长距离慢跑/Long Slow Distance(LSD): 以相对慢的速度跑比平时更长的距离。一般一周一次，主要用于提高耐力，准备参加全马的同学，平时可能需要玩玩LSD。</div><div class=\"line\">     </div><div class=\"line\">     轻松跑/Easy Run: 不记时间、距离的轻松的跑步。</div><div class=\"line\">     </div><div class=\"line\">     排酸跑: 主要是长距离比赛后，如半马，马拉松，甚至更长的时间的越野赛后，体内积聚的乳酸一时消除不了，当天又很累，于是第二天进行小量慢跑，帮助排酸，缓解疲劳。很慢的慢跑是进行有氧运动，基本不产生乳酸，而血液循环又加快了，有助于带走积压的乳酸盐。这比你静休一天效果要好不少。</div><div class=\"line\">     </div><div class=\"line\">     节奏跑/Tempo Run：以相对较快的速度（配速比参加<span class=\"number\">5</span>K/<span class=\"number\">10</span>K比赛时稍慢）跑<span class=\"number\">20</span><span class=\"number\">-30</span>分钟，一般一周一次。Tempo Run主要用于提高无氧阈。这样长时间的配速训练会有效提高身体去除乳酸的能力和效率，意即**乳酸门槛**提高了，这也就意味着下次以相同速度跑步时，将不会有那么多的乳酸堆积在肌肉当中。</div><div class=\"line\">     </div><div class=\"line\">     无氧阈/Anaerobic Threshold(AT)：更通俗的名称是乳酸门槛。指长跑中有氧活动转变为无氧活动，乳酸开始堆积的时候。通过合理的训练可以提高无氧阈，减少乳酸的形成。</div><div class=\"line\">     </div><div class=\"line\">     法特莱克训练法/Fartlek：看上去很高端，实际并不复杂。Fartlek是瑞典语中变速跑的意思，指在一次跑步训练中交替使用快、慢的速度。如果觉得大量的匀速跑非常无聊，可以尝试这种方式来提高速度和耐力。一般是跑龄比较久的小伙伴，为突破瓶颈而去认真地训练采用的方法。</div></pre></td></tr></table></figure>\n<p> <img src=\"/images/before_run_2.jpg\" alt=\"before_run_2.jpg\"></p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">赛事相关:</div><div class=\"line\"></div><div class=\"line\">     PB/PR：Personal Best/Record，个人最好成绩。没有什么比创造PB更让人兴奋的了。</div><div class=\"line\">     </div><div class=\"line\">     兔子/Rabbit：跑步赛事中的领跑员。一般是志愿者，他们对自己速度和节奏控制较好，在赛事活动中起到领跑的作用，可以帮助参加者提高成绩。一次马拉松赛事里可能会有三小时，三个半小时，四小时等不同时段的兔子。一般行话叫做：<span class=\"number\">300</span>兔子，<span class=\"number\">400</span>兔子，<span class=\"number\">430</span>兔子等等。</div><div class=\"line\">     </div><div class=\"line\">     净成绩/Chip Time：跑步赛事中参赛者都会配戴记时芯片。净成绩即指芯片记录的成绩。为何很多时候净成绩会和比赛成绩不一样？因为跑步活动一般参加人数众多，比赛成绩起始时间以枪响为准，而每个人通过起点线的时间却是不同的。</div><div class=\"line\">     </div><div class=\"line\">     分段/Splits：将一次长跑划分为数段，每一段就是一个split。negative splits（后段加速）指比赛的后半段比前半段更快，一般认为这样更好。一般参加多次马拉松的小伙伴，都会依据赛前的分段，制定不同的赛段的配速。</div><div class=\"line\">     </div><div class=\"line\">     波士顿资格/Boston Qualifier：简称BQ，指参加波士顿马拉松(跑者心中的麦加)的资格。能获得BQ对于每一个跑者都是一种荣誉的象征，因为BQ的要求实在太高！</div><div class=\"line\">     </div><div class=\"line\">     撞墙/Hitting the Wall：跑步过程中出现的感觉无法再前进的现象。造成的原因有很多，体力不够，跑的过快，距离超过了平时训练量等等。</div><div class=\"line\">     </div><div class=\"line\">     田径赛场上成绩统计常见的名词解释：</div><div class=\"line\">        OR：Olympic Record 奥运会纪录</div><div class=\"line\">        WR：World Record   世界纪录</div><div class=\"line\">        WL：world leader   当年世界最好成绩</div><div class=\"line\">        MR：match record   赛会纪录</div><div class=\"line\">        AR：area record    洲际纪录</div><div class=\"line\">        NR：nation record  国家纪录</div><div class=\"line\">        CR：Championship tournament record 锦标赛纪录</div></pre></td></tr></table></figure>\n<p>   <img src=\"/images/before_run_3.jpg\" alt=\"before_run_3.jpg\"></p>\n<h3 id=\"跑步装备\"><a href=\"#跑步装备\" class=\"headerlink\" title=\"跑步装备\"></a>跑步装备</h3><p><img src=\"/images/before_run_4.jpg\" alt=\"before_run_4.jpg\"></p>\n<h4 id=\"跑鞋\"><a href=\"#跑鞋\" class=\"headerlink\" title=\"跑鞋\"></a>跑鞋</h4><p>如果平时偶尔（频率很低）去操场跑两三圈，可能装备这块不用太在意，平常自己穿的运动鞋挑一双稍微宽松一点的即可。但是，如果是选择了跑步作为平常健身的一种常规方式，那么一双适合自己的专业跑鞋，就是必需品了，否则时间长了可能会对脚和膝盖造成损伤。<br>说起运动鞋大家可能对Nike和Adidas比较熟悉，但是真正的专业跑鞋来讲，下面的几家老店做跑鞋可能更专业：</p>\n<blockquote>\n<p>全球四大慢跑鞋品牌，指的是：<br>日本的Asics（亚瑟士）<br>美国的Brooks（布鲁克斯）<br>New Balance（新百伦）<br>SAUCONY（索康尼）</p>\n</blockquote>\n<ul>\n<li><p>亚瑟士(Asics)——==专为亚洲人脚型设计==<br><img src=\"/images/Asics.jpeg\" alt=\"Asics.jpeg\"></p>\n<pre><code>Asics是四大跑鞋之首，是日本大家鬼冢八喜郎先生创立的跑鞋品牌，中文译名“亚瑟士”。ASICS名称由拉丁谚语“好头脑寓于好身体”(Anima Sana in Corpore Sano)五个单词的首字母构成，这个取名反映了鬼塚喜八郎的价值观：通过运动培养健康的青少年。\n</code></pre></li>\n<li><p>索康尼(Saucony)——==运动鞋中的劳斯莱斯==<br><img src=\"/images/Saucony.jpeg\" alt=\"Saucony.jpeg\"></p>\n<pre><code>Saucony在美国享有“运动鞋中的劳斯莱斯”美誉，公司总部位于美国，具有100多年的历史(1898)。品牌名称来源于美国宾夕法尼亚州附近的一条河流Saucony，所以品牌的Logo代表的是「蜿蜒的河流」。1963年，Saucony因制作美国第一位太空漫步的太空人爱德华.怀特所穿的靴鞋而举世闻名，是一个充满传奇色彩的运动品牌。\n</code></pre></li>\n<li><p>布鲁克斯(Brooks)——==被股神巴菲特收购的运动品牌==<br><img src=\"/images/Brooks.jpeg\" alt=\"Brooks.jpeg\"></p>\n<pre><code>Brooks1914年诞生于美国宾夕法尼亚州，目前总部设在华盛顿，致力于专业运动鞋的研发，是运动品牌中率先使用运动鞋必备之EVA中底材质的专业品牌。Brooks Logo标志的意义为「一条蜿蜒向前延伸的道路」，品牌精神为“Run Happy”，期望人们从跑步中获得健康、成就感，更重要的是感到快乐享受。\n</code></pre></li>\n<li><p>新百伦(New Balance)——==总统慢跑鞋==<br><img src=\"/images/New Balance.jpeg\" alt=\"New Balance.jpeg\"></p>\n<pre><code>New Balance，1906年William J. Riley先生在美国马拉松之城波士顿成立，现已成为众多成功企业家和政治领袖爱用的品牌，奥巴马曾经就表示是这个品牌的爱好者(我大天朝Former Prime Minister也经常穿NB出镜)，在美国及许多国家被誉为“总统慢跑鞋”。\n</code></pre></li>\n</ul>\n<p>除此之外，还有一个很棒的牌子叫做Mizuno（美津浓），稳坐慢跑鞋品牌的第五把交椅。我的第一双入门跑鞋就是它，村上大叔也在书中推荐过（书中的水野牌指的就是美津浓），刚入门跑步的童鞋推荐之，因为相比上面的四大，价格要实惠不少，同时做跑鞋他家也是相当专业的。</p>\n<p>好了，介绍了这么多牌子，那么问题来了，我选哪个品牌呢，去哪买呢？<br>选鞋的第一标准也是唯一标准就是 适合自己的脚，怎么说？就是先得了解自己的脚是什么类型（内翻／外翻／正常足/是否需要选加宽型）：</p>\n<ol>\n<li>可以去Asics／Mizuno／NB等实体店进行脚型测试，具体实体店的地址可以从各家的官网查询到官方授权的店。</li>\n<li>也可以使用官网的在线测试：<br><a href=\"http://shoeadvisor.newbalance.com.cn\" target=\"_blank\" rel=\"external\">NB官网测试</a><br><a href=\"http://www.myprecisionfit.com/\" target=\"_blank\" rel=\"external\">Mizuno测试工具</a></li>\n</ol>\n<p>了解自己的脚型之后，个人觉得有条件的话， <strong>建议去实体店试穿一下</strong>，在店内试着跑一跑，看看上脚之后的感觉怎么样。购买的话，<strong>建议国内的实体店购买或者在实体店试穿后海淘之</strong>，不建议国内的淘宝或者京东上购买，一方面价格不会便宜多少，加上网上购买的坑你懂的。</p>\n<blockquote>\n<p>我的第一双美津浓是在王府井的利生体育用品店买的，也是官网授权的实体店，但是这家店有时候针对一些特定的颜色会有折扣（当时Rider17有两款颜色打7折好像），要知道这种小众的专业跑鞋一般是很少有折扣活动的，记得当时我看了好几家实体店，基本都没有折扣。</p>\n<p>我的另一双亚瑟士是找小伙伴托同学在日本亚马逊购买的（日本不管是实体店还是网店基本没有什么假货，这点还是比较放心的，哎，我天朝好多官方网店都是真假掺着卖的不说了。。。），这里要墙裂推荐买亚瑟士的同学，有条件的话可以通过一些途径在日本买，当时买的NIMBUS 17系列比国内便宜将近一半。</p>\n<p>索康尼从今年开始也进入大陆市场了，西单的汉光百货负一层就新开了一家专卖店，想入手的同学可以去试穿一下（他家的鞋底那个高啊，不过弹性相当好）。</p>\n</blockquote>\n<p>关于跑鞋这一块，还有非常多的专业知识可以脑补，<a href=\"http://www.zhihu.com/question/19937281\" target=\"_blank\" rel=\"external\">知乎体</a>里面专业大牛非常多，有介绍四大的各自优势／<a href=\"https://www.youtube.com/embed/jGcQCwwnUQ0\" target=\"_blank\" rel=\"external\">自家的黑科技</a>／各类跑鞋系列／每个系列不同版本的Bug fix &amp;&amp; 升级点；<a href=\"http://chuansong.me/n/1081852\" target=\"_blank\" rel=\"external\">你需要了解的跑鞋品牌</a>；<a href=\"http://www.zhihu.com/question/35389130\" target=\"_blank\" rel=\"external\">更多跑步相关的专业术语</a>等。</p>\n<h4 id=\"跑步裤／压缩裤\"><a href=\"#跑步裤／压缩裤\" class=\"headerlink\" title=\"跑步裤／压缩裤\"></a>跑步裤／压缩裤</h4><p>之前自己一直穿的普通运动裤，但是有个问题，就是跑步时间长了容易摩擦大腿，而且材质的贴身性也不是很好，所以入手了一个Nike的运动短裤，轻便贴身，跑起来很舒服。冬天又败了一个Adidas的长款跑步裤，冬天短裤实在是扛不住。。<br>压缩裤，是能够提高肌肉的力量，缓解乳酸堆积，使得运动更加持久，穿上让你装逼满分的专业装备，主要有压缩／支撑／贴身／导汗等功能，穿起来稍微麻烦一点，得套一个短裤在外面。</p>\n<h4 id=\"速干T恤\"><a href=\"#速干T恤\" class=\"headerlink\" title=\"速干T恤\"></a>速干T恤</h4><p>主要是排汗性较好，天气炎热的时候跑步是需要及时将身体的热量排散出去的；天冷的时刚跑完如果上衣湿透了，风吹后容易着凉感冒。这个一般参加跑步比赛时都会发（现在手上发的参赛服加上自己买的一些，十几件了。。。），阿迪/耐克/迪卡侬（各种良心跑步装备集结地）店里也有很多系列。</p>\n<h4 id=\"运动袜／跑步袜\"><a href=\"#运动袜／跑步袜\" class=\"headerlink\" title=\"运动袜／跑步袜\"></a>运动袜／跑步袜</h4><p>一方面专业的袜子排汗性比价好，另外在脚尖和脚跟的部位会有加厚处理，一般运动用品店（迪卡侬有很多）里都有卖，今年北马发的阿迪的长筒袜我觉得很赞，跑起来很舒服。</p>\n<h4 id=\"跑步帽／跑步手套\"><a href=\"#跑步帽／跑步手套\" class=\"headerlink\" title=\"跑步帽／跑步手套\"></a>跑步帽／跑步手套</h4><p>冬天户外跑可能需要他们俩，因为在北京，冬天户外温度比较低＋有时会有风相伴，有了他们俩，耳朵／手／头部 就可以保暖了，不然真心冷啊。<br>夏天或者去沿海城市比赛的话，建议买一个遮阳帽（自己入手了一个<a href=\"https://detail.tmall.com/item.htm?id=44674185939&amp;spm=a1z09.2.0.0.rGRRae&amp;_u=6f83r440e8e\" target=\"_blank\" rel=\"external\">亚瑟士</a>的，今年5月份去秦皇岛比赛的时候，派上用场了，海边的阳光还是很猛的）。</p>\n<p>跑步手套还有那种带反光材料的，适合经常夜跑的同学。</p>\n<h4 id=\"腰包／头巾\"><a href=\"#腰包／头巾\" class=\"headerlink\" title=\"腰包／头巾\"></a>腰包／头巾</h4><p>腰包主要是跑步的时候，如果需要携带手机／钥匙／钱包等东西，比较有用，这样跑的时候就不用拿在手里或者在口袋里晃来晃去了。我买的是这一款<a href=\"https://detail.tmall.com/item.htm?id=19733464568&amp;spm=a1z09.2.0.0.rGRRae&amp;_u=6f83r44acdd\" target=\"_blank\" rel=\"external\">力伯侬腰包</a>，亲测质量还不错，各种型号大小都有。</p>\n<p>头巾平常带在头上或者围在口部，可以防风沙灰尘。</p>\n<h4 id=\"GPS手表／跑步APP\"><a href=\"#GPS手表／跑步APP\" class=\"headerlink\" title=\"GPS手表／跑步APP\"></a>GPS手表／跑步APP</h4><p>专业的运动手表，可以实时监测到很多数据（跑速／心率／卡路里／天气），对平时的训练可以起到指导作用。Team里也有不少各式各样的运动手表，比如Jun土豪的<a href=\"https://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.11.GwnGQN&amp;id=44315322189&amp;skuId=3111016925145&amp;areaId=110100&amp;cat_id=2&amp;rn=7fa555710f0ee52350ab7633804ace0e&amp;user_id=1660875242&amp;is_b=1\" target=\"_blank\" rel=\"external\">Garmin Fenix3</a>；Bin土豪的<a href=\"https://detail.tmall.com/item.htm?spm=a220m.1000858.1000725.1.bOCIQ9&amp;id=40976997365&amp;skuId=70723331480&amp;areaId=110100&amp;cat_id=55852013&amp;rn=7d89ffd8212ee35e9ae7dae20a3b7989&amp;user_id=2095669179&amp;is_b=1\" target=\"_blank\" rel=\"external\">Fitbit Charge HR</a>；Quan总的<a href=\"http://item.jd.com/1204020518.html#product-detail\" target=\"_blank\" rel=\"external\">NIKE+ GPS运动手表</a>；Guo总的<a href=\"http://item.jd.com/1535086660.html\" target=\"_blank\" rel=\"external\">TomTom Cardio</a>。哎，无奈Apple Watch One暂时还没有GPS功能，不然可以入手一个了，我还在等等等，哭。。。</p>\n<p>跑步APP自己玩的是Nike+（国内咕咚用的人也比较多，国外的有Runtastic），可以记录下自己的跑步里程／地理位置／速度／时间／卡路里等，与跑步的小伙伴一起分享一起Run。</p>\n<h4 id=\"能量胶／云南白药／创可贴／凡士林\"><a href=\"#能量胶／云南白药／创可贴／凡士林\" class=\"headerlink\" title=\"能量胶／云南白药／创可贴／凡士林\"></a>能量胶／云南白药／创可贴／凡士林</h4><p>这些都是参加全程马拉松可能需要常备的一些东东，马拉松是一个非常需要体力的项目，但也不是完全依靠毅力就能完成的，它还需要技术、科技的支持。<br>自备这些东西，已经成了我每次参加全程马拉松的习惯性准备了，一般大型赛事的补给相对完备，但也不能排除药品／能量棒短缺的可能（14年北马，进入奥森以后各补给站基本都没有云南白药了。。多么痛的领悟啊），这些小东西都可以放入上面提到的腰包里，以备不时之需。</p>\n<p>能量胶网上可以买到，有时候赛事主办方可能提供的是块状能量棒，坚硬难啃，而能量胶是稠糊态，可以吸食类似果冻一样。全程马拉松整个过程是需要<strong>定期补给的（补水／补充能量）</strong>，而不能等到渴了饿了的时候才想到去补给，因为身体还需要一些时间来消化吸收这些水分和能量。</p>\n<p>创可贴是男童鞋用来保护乳头的(全马下来可能会磨破出血，哎，我就经常悲剧。。)，用创可贴贴一个十字贴，这样跑42公里的时候就不会发生摩擦。<br>胖一点的童鞋可以买一点药物涂在大腿内侧，防止摩擦，就是油膏状的这些药物，凡士林这些是非常有帮助的。</p>\n","categories":["run"],"tags":["run introduction"]},{"title":"lua全局变量的二三坑","url":"http://cloudkey.github.io/2015/12/01/lua-global-variable-trap/","content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>  最近正在开发关于WebService相关系统，其中有两个模块使用的是（nginx+lua）框架，业务逻辑用lua语言实现。而从这两个新模块上线到正常运行，一共发生了两次请求错乱的线上问题：<br>  <figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">query A:  http:://uriA + argsA</div><div class=\"line\">在经过proxy（<span class=\"keyword\">or</span> webui）这一层处理之后，请求传到下一层<span class=\"built_in\">module</span>变成了queryB，导致请求错乱，影响线上服务。</div><div class=\"line\">query B:  http:://uriB + argsB</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h2 id=\"第一次踩坑-amp-amp-追查过程-proxy-：\"><a href=\"#第一次踩坑-amp-amp-追查过程-proxy-：\" class=\"headerlink\" title=\"第一次踩坑&amp;&amp;追查过程(proxy)：\"></a>第一次踩坑&amp;&amp;追查过程(proxy)：</h2><ol>\n<li><p>首先确定入口请求的URL A，经过proxy处理之后，NOTICE日志打印的URL，发现前后的URL不一致，怀疑是经过某个module之后，URL被篡改。同时这种现象一般发生在<strong>前后时间比较靠近的请求之间<em> </em></strong>。</p>\n</li>\n<li><p>线上一台proxy机器打开一台nginx debug日志（注意：日志很大，所以时间不能太长），发现了一个比较诡异的现象：</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">1</span> lua upstream: B64A2168</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">2</span> lua upstream: B71D5FF8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">1</span> lua upstream: B64A2168</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">2</span> lua upstream: B71D5FF8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">1</span> lua upstream: B64A2168</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">1</span> lua upstream: B64A2168 &lt;===</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">2</span> lua upstream: B71D5FF8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">2</span> lua upstream: B71D5FF8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">1</span> lua upstream: B71D5FF8 &lt;=== </div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">22</span>:<span class=\"number\">42</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">2</span> lua upstream: B71D5FF8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">5</span> lua upstream: B64B0A20</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">6</span> lua upstream: B64B0FA8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">5</span> lua upstream: B64B0A20</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">6</span> lua upstream: B64B0FA8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">5</span> lua upstream: B64B0A20</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">5</span> lua upstream: B64B0A20</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">6</span> lua upstream: B64B0FA8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">6</span> lua upstream: B64B0FA8</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">5</span> lua upstream: B64B0A20</div><div class=\"line\"><span class=\"number\">10</span>:<span class=\"number\">29</span>:<span class=\"number\">23</span> [<span class=\"built_in\">debug</span>] <span class=\"number\">3505</span>#<span class=\"number\">0</span>: *<span class=\"number\">6</span> lua upstream: B64B0FA8</div></pre></td></tr></table></figure>\n<p>两个箭头指向的都是req1，但是前后的upstream pointer确发生了改变，第二个箭头表明req1使用了upstream pointer “B71D5FF8”，但是这个pointer这时候req2正在使用，这时候我们觉得很可能是upstream pointer的改变，导致了URL被篡改（也就是reqA -&gt; reqB），但是是什么原因导致upstream pointer改变一时还没有什么头绪。</p>\n</li>\n<li><p>这时候想到了openresty google group和github openresty issue，想看看有没有遇到类似异常情况的。<br>发现有一个帖子<a href=\"https://github.com/openresty/lua-nginx-module/issues/150\" target=\"_blank\" rel=\"external\">It seems the socket upstream pointer changed while processing concurrent requests.</a>有点类似我们的情况，仔细看了一下帖子，楼主和春哥的结论是lua global variable不当使用，造成意外的跨请求socket共享，导致异常出现。</p>\n</li>\n<li><p>使用<a href=\"https://github.com/openresty/nginx-devel-utils/blob/master/lua-releng\" target=\"_blank\" rel=\"external\">lua-releng</a>脚本check我们的proxy代码发现：<br><img src=\"/images/proxy-global-variable.png\" alt=\"proxy-global-variable.png\"></p>\n</li>\n<li><p>飘红的地方使用了非预期的全局变量，改成local之后，小流量上线验证，不再出现请求错乱的情况。</p>\n</li>\n</ol>\n<h2 id=\"lua全局变量官方说明\"><a href=\"#lua全局变量官方说明\" class=\"headerlink\" title=\"lua全局变量官方说明\"></a>lua全局变量官方说明</h2><p>关于lua变量的作用域，官方文档说明：  <a href=\"https://github.com/openresty/lua-nginx-module#lua-variable-scope\" target=\"_blank\" rel=\"external\">lua-variable-scope</a><br><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Generally, use of Lua global variables is a really really bad idea <span class=\"keyword\">in</span> the context of ngx_lua because</div><div class=\"line\"><span class=\"number\">1.</span> misuse of Lua globals has very bad side effects <span class=\"keyword\">for</span> concurrent requests when these variables are actually supposed to be <span class=\"keyword\">local</span> only,</div><div class=\"line\"><span class=\"number\">2.</span> Lua global variables <span class=\"built_in\">require</span> Lua <span class=\"built_in\">table</span> look-up <span class=\"keyword\">in</span> the global environment (which is just a Lua <span class=\"built_in\">table</span>), which is kinda expensive, <span class=\"keyword\">and</span></div><div class=\"line\"><span class=\"number\">3.</span> some Lua global variable references are just typos, which are hard to <span class=\"built_in\">debug</span>.</div><div class=\"line\">It<span class=\"string\">'s highly recommended to always declare them via \"local\" in the scope that is reasonable.</span></div></pre></td></tr></table></figure></p>\n<p>官方说明：在并发场景下，一些应该使用局部变量的地方如果滥用lua的全局变量可能会导致一些异常的情况出现； 同时全局变量的访问开销代价很大；如果出错很难调试。</p>\n<h2 id=\"第二次踩坑-ui-module\"><a href=\"#第二次踩坑-ui-module\" class=\"headerlink\" title=\"第二次踩坑(ui module)\"></a>第二次踩坑(ui module)</h2><p>经过第一次的经验，我们已经将proxy 和 ui 代码进行了全量的check，修复所有非预期的全局变量的使用。<br>但是，ui上线切新的流量之后，一些服务又出现请求错乱的问题，查看日志发现同一个logid的请求，URL前后又出现不一致情况，并且重试的情况下，有概率的出现。</p>\n<p><strong>当时，第一感觉是全局变量问题，但是我们线上的代码已经用lua-releng脚本check过了，并未有非local变量的情况。</strong></p>\n<p>追查过程：</p>\n<ul>\n<li>因为这次上线是首次使用action/InnerRedirect.lua模块，所以我们的检查重点放在这个module中。</li>\n<li><p>有一个涉及全局变量的地方引起了我们的注意：</p>\n<p><img src=\"/images/ui-global-invalid-use.png\" alt=\"ui-global-invalid-use.png\"></p>\n<p>飘红的箭头是一个全局的配置，而Conf_Services是一个全局变量，但是这里是赋值给local变量service，而service变量在下面的地方进行了修改：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">service.url = path</div><div class=\"line\">service.args = args</div></pre></td></tr></table></figure>\n<p>相当于我们把一个全局变量赋值给一个已经申明为local的变量，然后直接对这个local table变量进行修改。<br>这个地方有点怀疑这个<strong>local table变量service，在用全局变量赋值的时候使用的是浅拷贝</strong>，为了验证我们的怀疑，写了下面一个非常简单的lua test script:</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">table_global = &#123; </div><div class=\"line\">    [<span class=\"string\">\"key1\"</span>] = <span class=\"string\">\"key1\"</span>,</div><div class=\"line\">    [<span class=\"string\">\"key2\"</span>] = <span class=\"string\">\"key2\"</span>,</div><div class=\"line\">    [<span class=\"string\">\"key3\"</span>] = <span class=\"string\">\"key3\"</span>,</div><div class=\"line\">&#125;   </div><div class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"global table address: \"</span>)</div><div class=\"line\"><span class=\"built_in\">print</span>(table_global)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">local</span> tmp_table = table_global</div><div class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"local table address: \"</span>)</div><div class=\"line\"><span class=\"built_in\">print</span>(tmp_table)</div><div class=\"line\"></div><div class=\"line\">tmp_table[<span class=\"string\">\"key3\"</span>] = <span class=\"string\">\"key333\"</span></div><div class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">\"After modidy local table field: \"</span>)</div><div class=\"line\"><span class=\"built_in\">print</span>(table_global[<span class=\"string\">\"key3\"</span>])</div><div class=\"line\"></div><div class=\"line\">TEST RESULT:</div><div class=\"line\">    global <span class=\"built_in\">table</span> address: </div><div class=\"line\">    <span class=\"built_in\">table</span>: <span class=\"number\">0x539de0</span></div><div class=\"line\">    <span class=\"keyword\">local</span> <span class=\"built_in\">table</span> address: </div><div class=\"line\">    <span class=\"built_in\">table</span>: <span class=\"number\">0x539de0</span></div><div class=\"line\">    After modidy <span class=\"keyword\">local</span> <span class=\"built_in\">table</span> field: </div><div class=\"line\">    key333</div></pre></td></tr></table></figure>\n</li>\n<li><p>更改此处service使用全局配置的方式：</p>\n<p><img src=\"/images/fix-global-to-local.png\" alt=\"fix-global-to-local.png\"></p>\n<p>上线一台机器出现缩略图错乱的线上机器，不再出现URL被篡改情况。</p>\n<p>而刚才说的只有在第一次请求失败之后，重试才会出现错乱，是因为：在第二次重试的时候，代码逻辑中的<code>compare_str</code>条件才为<code>true</code>，service变量被赋值，因为在重试的时候会出现引入全局变量。</p>\n</li>\n<li><p>lua 中的table使用的是<strong>引用方式<em> </em></strong>，这个大家都清楚，但是<code>table的拷贝是浅拷贝</code>，如果我们在代码不得己需要使用全局的配置，赋值给一个local table，同时在后续的逻辑中更改了这个local table，就有可能会出现引入全局变量的情况。</p>\n</li>\n</ul>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ol>\n<li><p>lua中的全局变量使用需谨慎，可以使用 <a href=\"https://github.com/openresty/nginx-devel-utils/blob/master/lua-releng\" target=\"_blank\" rel=\"external\">lua-releng-tool</a> 脚本check非预期的global variable，尽量使用local 申明变量。</p>\n</li>\n<li><p>对于一些全局的Conf，不得不使用全局变量的时候，在table 赋值引用的时候，需要进行特殊处理（例如上面的坑二处理方式）。或者使用clone的方式，进行深拷贝赋值（<a href=\"http://stackoverflow.com/questions/640642/how-do-you-copy-a-lua-table-by-value\" target=\"_blank\" rel=\"external\">lua-clone</a>）。</p>\n</li>\n<li><p>后续对新上传SVN的代码都需要使用lua-releng脚本进行check；<br>同时，在引用全局配置的时候都需要使用特殊方式处理，防止异常case。</p>\n</li>\n</ol>\n","categories":["work"],"tags":["ngx-lua"]},{"title":"lua-coding-style","url":"http://cloudkey.github.io/2015/11/15/lua-coding-style/","content":"<h2 id=\"命名规范：\"><a href=\"#命名规范：\" class=\"headerlink\" title=\"命名规范：\"></a>命名规范：</h2><ul>\n<li>文件名：  首字母大写驼峰型（第一个单词首字母也大写）</li>\n<li>常量：    由字母、数字、<em> 构成，字母全大写，首字母必须为字母，单词之间使用”</em>“相连</li>\n<li>函数名：  由字母、数字、<em> 构成，字母全小写，首字母必须为字母，单词之间使用”</em>“相连</li>\n<li>局部变量：由字母、数字、<em> 构成，字母全小写，首字母必须为字母，单词之间使用”</em>“相连</li>\n<li>全局变量：由字母、数字、<em> 构成，字母全小写，必须为”g</em>“开头，单词之间使用”_”相连，最好不用全局变量</li>\n<li>配置变量：由字母、数字、<em> 构成，由”Conf</em>“开头，单词首字母大写，单词之间使用”_”相连</li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"代码组织：\"><a href=\"#代码组织：\" class=\"headerlink\" title=\"代码组织：\"></a>代码组织：</h2><ul>\n<li><p>文件开头加上功能描述；每个文件都加module限定词；导入的模块都加local限定词</p>\n</li>\n<li><p>所有函数都加注释：</p>\n<blockquote>\n<p>函数功能： @brief xxx<br>param描述：@param xxx<br>return：   @return xxx </p>\n</blockquote>\n</li>\n<li><p>合理的空行：函数之间、函数内部代码块之间</p>\n</li>\n<li><p>注释格式：单行注释使用”–”；多行注释使用–[[]]，其中在”]]”前面加”–”，如果要取消注释，只用在”–[[“前再加一个”-“就行</p>\n</li>\n<li><p>常量、消息号、枚举值行末都加上分号 ——？</p>\n</li>\n<li><p>函数内的临时变量、文件内的局部函数都加上 local 限定词</p>\n</li>\n<li><p>函数内部代码块尽量加注释</p>\n</li>\n<li><p>单个函数较长时（大于100行），尽量拆分成多个子函数</p>\n</li>\n<li><p>assert 函数开销不小，请慎用</p>\n</li>\n<li><p>lua类设计时，用元表来实现oop </p>\n<blockquote>\n<p>不要直接增加函数成员，因为直接增加函数成员会导致内存增加，并且在jit下执行效率和用元表方式无差异</p>\n</blockquote>\n</li>\n<li><p>空格符：</p>\n<blockquote>\n<p>运算符之间，如 s = a + b<br>参数列表或数组元素之间，如 fuction my_sum(a, b)，{1, 2, 3}<br>注意：函数参数列表中，左括号与第一个参数之间、右括号与最后一个参数之间，都不要加空格</p>\n</blockquote>\n</li>\n<li><p>单行超过80字符时，应该换行</p>\n<blockquote>\n<p>函数参数换行时，下一行与上一行的第一个参数对齐</p>\n</blockquote>\n</li>\n<li><p>运算较复杂时，使用小括号分割每个运算逻辑，增加可读性，同时避免运算符优先级顺序问题</p>\n</li>\n<li><p>4字符缩进</p>\n</li>\n<li><p>日志：</p>\n<blockquote>\n<p>1.明确的日志级别<br>2.每个异常处必须有日志（warning、error）说明异常原因<br>3.日志必须传一个参数，可以是string和table，如果是string，最好为[key:value]形式；如果是table，日志库会自动转成[key:value]形式，且第一个key为message(如果存在) </p>\n</blockquote>\n</li>\n<li><p>尽量减少表中的成员是另一个表的引用 ——？</p>\n</li>\n<li><p>取table的长度用#，不用table.getn</p>\n</li>\n<li><p>当table中的key是纯数字(不一定有序)的时候,求table长度不可以用#(错误),可以用Utils.tableCount(pairs遍历)函数;<br>相同场景,打印table的内容,用Utils.simple_var_dump(table.concat实现);<br>按照key大小顺序遍历的话,用pairsByKeys(this function get from [Programming In Lua])获取迭代器</p>\n</li>\n<li><p>尽量避免magic number</p>\n</li>\n</ul>\n<h2 id=\"lua的全局变量问题\"><a href=\"#lua的全局变量问题\" class=\"headerlink\" title=\"lua的全局变量问题\"></a>lua的全局变量问题</h2><ul>\n<li><p>之前使用ngx-lua实现一个类似proxy的项目时，发现使用长连接机制会导致 请求错乱(不同的连接数据发生混乱)的现象，经追查发现lua中全局变量使用如果不当会导致一些未可知的异常情况。</p>\n<blockquote>\n<p>类似的也有其他同学遇到过相似的困扰：</p>\n  <figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">https://github.com/openresty/lua-nginx-<span class=\"built_in\">module</span>/issues/<span class=\"number\">150</span></div><div class=\"line\">http://wiki.nginx.org/HttpLuaModule#Data_Sharing_within_an_Nginx_Worker</div><div class=\"line\">http://zacharyhu.org/?p=<span class=\"number\">373</span></div></pre></td></tr></table></figure>\n<p>解决方案：<br>  在用 ngx-releng 脚本check代码全量global变量之后，将所有global更改为local；同时对长连接建立失败或者读写超时的连接，进行close connection的处理。经验证上线之后数据错乱问题不再复现。</p>\n</blockquote>\n</li>\n<li>所以建议对自己的代码用ngx-releng脚本进行check，尽量使用local变量。</li>\n</ul>\n","categories":["work"],"tags":["lua"]},{"title":"索康尼上脚感受","url":"http://cloudkey.github.io/2015/11/10/saucony-feel/","content":"<p>自从听说索康尼（跑鞋中的劳斯莱斯）登录中国，一直脚痒痒想去试穿一下，感受下其牛逼和与美津浓／亚瑟士不同的技点，终于上周周末抽时间去西单汉光百货找到了传说中Triumph ISO系列，并试跑了一小段，下面是一些随笔的感受：<br><a id=\"more\"></a></p>\n<ul>\n<li><p>鞋重比亚瑟士轻不少，整体造型酷炫<br><img src=\"/images/saucony_1.JPG\" alt=\"IMG_0775.JPG\"></p>\n</li>\n<li><p>鞋底很厚非常厚，增高2-3厘米<br><img src=\"/images/saucony_2.JPG\" alt=\"IMG_0776.JPG\"></p>\n</li>\n<li><p>鞋宽的话感觉比美津浓要窄一点点，而且没有加宽E型号</p>\n</li>\n<li><p>跑起来不知道为啥前脚掌不自觉先着地(待研究)，跑起来轻便舒服</p>\n</li>\n<li><p>价格国内1299，最近汉光做活动9折，美亚上的价格待补充</p>\n</li>\n</ul>\n","categories":["run"],"tags":["shoes"]},{"title":"新鲜出炉：NB慢跑课堂随手记","url":"http://cloudkey.github.io/2015/11/08/nb-lsd/","content":"<p>Time : 2015/05/16 8:00 - 9:30</p>\n<p>Location : 奥林匹克森林公园</p>\n<p>Coach : 台湾奥运田径队主教练 - Jian professor</p>\n<p>Sponsor : New Balance</p>\n<p>Theme : LSD (Long Slow Distance)<br><a id=\"more\"></a></p>\n<hr>\n<blockquote>\n<blockquote>\n<p>PM2.5 100以下的时候，奥森的空气、环境很赞，8点以前人还是比较少的，家近的童鞋可以周末去走走跑跑 ^^<br><img src=\"https://lh3.googleusercontent.com/-DB49sqrux2U/VZqn-L79OOI/AAAAAAAAAYA/T8NXLG1OdPc/s720/IMG_0170.JPG\" alt=\"奥森的早晨\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/-zJrFzqTMRfk/VZqn-KJPpMI/AAAAAAAAAYA/8p_7gShPUo0/s640/IMG_0171.JPG\" alt=\"奥森的早晨\"></p>\n<p><img src=\"https://lh3.googleusercontent.com/-NnDawn0BwIs/VZqn-BbdvoI/AAAAAAAAAYA/dfcSckSmElw/s640/IMG_0172.JPG\" alt=\"奥森的早晨\"></p>\n</blockquote>\n</blockquote>\n<hr>\n<h1 id=\"Class-ing\"><a href=\"#Class-ing\" class=\"headerlink\" title=\"Class ing\"></a>Class ing</h1><ul>\n<li><a href=\"#prelude\">Prelude</a></li>\n<li><a href=\"#health\">Health</a></li>\n<li><a href=\"#posture\">Posture</a></li>\n<li><a href=\"#pre-run-preparation\">Pre Run Preparation</a></li>\n<li><a href=\"#run-speed\">Run Speed</a></li>\n<li><a href=\"#run-time\">Run Time</a></li>\n<li><a href=\"#frequency\">Frequency</a></li>\n<li><a href=\"#replenishment\">Replenishment</a></li>\n</ul>\n<h1 id=\"Prelude\"><a href=\"#Prelude\" class=\"headerlink\" title=\"Prelude\"></a>Prelude</h1><p><code>健康的跑，科学的跑，开心的跑</code></p>\n<p> <strong>教授</strong>首先向我们简单的介绍了有氧运动和无氧运动的概念和区别（跑步属于有氧、篮球属于无氧、<strong>高尔夫？</strong>大家猜猜有氧还是无氧？），下面的内容都是课堂上随手记的一些点，一条一条来吧（如果有错误的地方希望大家能够指出）：</p>\n<blockquote>\n<ul>\n<li><p><img src=\"https://lh3.googleusercontent.com/-8WTcifHsJrY/VZqn-GvmD_I/AAAAAAAAAYA/sFSNSsUPe78/s640/IMG_0175.JPG\" alt=\"讲课ing\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-V6XccR0bwf8/VZqn-G2e06I/AAAAAAAAAYA/K6ZJ6YEk3iQ/s640/IMG_0183.JPG\" alt=\"讲课ing\"></p>\n</li>\n</ul>\n</blockquote>\n<p><a href=\"#class-ing\">Back to TOC</a></p>\n<h1 id=\"Health\"><a href=\"#Health\" class=\"headerlink\" title=\"Health\"></a>Health</h1><p>健康三要素：营养、休息（不是指简单的睡大觉）、运动</p>\n<h1 id=\"Posture\"><a href=\"#Posture\" class=\"headerlink\" title=\"Posture \"></a>Posture </h1><p><code>跑步姿势</code></p>\n<p>首先身体要摆正，这样跑起来才不会左右摇摆（浪费体力做无用功，伤害身体）</p>\n<p><strong>手臂</strong>：跑的时候手臂左右摆动，尽量向后摆（像划桨一样形成一种助推力），但是手臂左右摆动不要超过鼻梁这条中心线，否则身体容易失去平衡，就会左右晃动。</p>\n<p><strong>落脚</strong>：慢跑，后脚跟先落地，中掌 -&gt; 前脚掌，波浪形前进（落脚整个感觉是一种此起彼伏的连贯动作，能够减少对膝盖的冲击，而不是刹车似得铲地）。如果是冲刺阶段，则是前脚尖先着地（身体可以稍微向前倾，身体的重力也可以帮忙加速）  </p>\n<blockquote>\n<ul>\n<li><p><img src=\"https://lh3.googleusercontent.com/-ZncQxhHDa-8/VZqoHBmTYUI/AAAAAAAAAYM/YaIigitJp5E/s512/IMG_0187.JPG\" alt=\"站正\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-vZz5pidtiAk/VZqoHFh_-UI/AAAAAAAAAYM/sbcdTVdOfjQ/s512/IMG_0186.JPG\" alt=\"肩平\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-O2d-xqRKO54/VZqoHMq11BI/AAAAAAAAAYM/qXD3ogCuHS4/s640/IMG_0190.JPG\" alt=\"落脚\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-npx05YwzOdg/VZqoHKE-CxI/AAAAAAAAAYM/0_gM58k6ykc/s640/IMG_0191.JPG\" alt=\"落脚\"></p>\n</li>\n</ul>\n</blockquote>\n<h1 id=\"Pre-Run-Preparation\"><a href=\"#Pre-Run-Preparation\" class=\"headerlink\" title=\"Pre Run Preparation\"></a>Pre Run Preparation</h1><p>跑前准备活动：<strong>准备活动非常重要，否则活动中容易受伤</strong></p>\n<p><code>活动操</code></p>\n<p>伸懒腰 -&gt; 活动肩椎 -&gt; 手臂伸直转圈 —&gt; 手按着膝盖转圈 -&gt; 抬起脚尖转圈圈 -&gt; 压腿 -&gt; 拉伸左右腿 -&gt; 推墙拉伸小腿和脚后跟的地方</p>\n<p>注：活动操4/4拍</p>\n<blockquote>\n<ul>\n<li><p><img src=\"https://lh3.googleusercontent.com/-L2RZLliuZvM/VZqoHJgrs0I/AAAAAAAAAYQ/FZntQMPcmD8/s640/IMG_0181.JPG\" alt=\"活动颈椎\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-Chz9BxDt9hA/VZqn-BqimDI/AAAAAAAAAYA/lxD7hpm_veo/s640/IMG_0180.JPG\" alt=\"压腿\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-QQfK2XKnyVk/VZqn-IAScDI/AAAAAAAAAYA/4Bd2ivS6dGo/s640/IMG_0178.JPG\" alt=\"拉伸\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-yzYbl0rF-Qg/VZqn-IAoPhI/AAAAAAAAAYA/L6zPjFeSFZw/s640/IMG_0184.JPG\" alt=\"继续拉伸\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-1aYGP-Uljws/VZqn-BbKwAI/AAAAAAAAAYA/mEO3vqH_SmM/s640/IMG_0179.JPG\" alt=\"最后的拉伸\"></p>\n</li>\n</ul>\n</blockquote>\n<p><code>跑前适应</code></p>\n<p>上下踮脚，手放轻松</p>\n<p>前脚掌小跑一小会</p>\n<blockquote>\n<ul>\n<li><p><img src=\"https://lh3.googleusercontent.com/-NWg3cWhTKco/VZqoHEQGKGI/AAAAAAAAAYQ/2HK4IQmPUQQ/s640/IMG_0188.JPG\" alt=\"上下踮脚\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-vu_5RngULgs/VZqoHLbmgqI/AAAAAAAAAYQ/tlhqhClfiFg/s640/IMG_0193.JPG\" alt=\"小跑一会\"></p>\n</li>\n</ul>\n</blockquote>\n<p>跑步是一项全身运动，所以==准备活动也是从身体至上而下的==，全身每个主要关节都需要活动开来。</p>\n<h1 id=\"Run-Speed\"><a href=\"#Run-Speed\" class=\"headerlink\" title=\"Run Speed \"></a>Run Speed </h1><p><code>跑速</code></p>\n<p>经常跑步的童鞋心率应该都是在 <strong>70/min</strong> 以下，心率长期在 85 以上身体就处于不健康的状态了。而跑步的速度就是根据每个人的心率来定的，而不是要跑的多么快，适合自己的速度才是最重要（<strong>听听自己身体的声音</strong>）。</p>\n<p>跑步时候的<strong>心率公式</strong>：<br>                      (220 - 年龄) * 70%</p>\n<p>注：+/- 5 range</p>\n<p>跑步半年的童鞋可以 + 5，一年以上的 + 10。</p>\n<p>跑时心率怎么测？ 慢跑15分钟后，30s内测试自己的心率，如果超过自己公式算出的值，可以考虑降点速，反之提点速。</p>\n<blockquote>\n<ul>\n<li><p><img src=\"https://lh3.googleusercontent.com/-5jnGDHPeQRw/VZqoHD6_wEI/AAAAAAAAAYQ/zZ1ePWjWOI8/s640/webwxgetmsgimg%252520%2525281%252529.jpg\" alt=\"跑起来\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-7pEzbDEKS5I/VZqoHGOJGAI/AAAAAAAAAYQ/ZshwvHIkINo/s640/IMG_0189.JPG\" alt=\"跑起来\"></p>\n</li>\n<li><p><img src=\"https://lh3.googleusercontent.com/-A6kpjy67hO4/VZqoHHq347I/AAAAAAAAAYQ/Zw_HBLDtu6Y/s640/IMG_0192.JPG\" alt=\"跑起来\"></p>\n</li>\n</ul>\n</blockquote>\n<h1 id=\"Run-Time\"><a href=\"#Run-Time\" class=\"headerlink\" title=\"Run Time\"></a>Run Time</h1><p>一次慢跑的时间：</p>\n<blockquote>\n<ul>\n<li><p>&lt; 30岁     : 一次慢跑40分钟以上，具体时间根据身体状况来定。</p>\n</li>\n<li><p>30 - 50 岁 ： 30分钟以上，具体时间视情况定</p>\n</li>\n<li><p>超过50岁   ： 20 - 25 分钟</p>\n</li>\n</ul>\n</blockquote>\n<p>一次跑完可以慢走，将心率降到100以下。</p>\n<h1 id=\"Frequency\"><a href=\"#Frequency\" class=\"headerlink\" title=\"Frequency\"></a>Frequency</h1><p><code>频率</code></p>\n<p>慢跑基础训练（有氧运动）一周至少两次，最好是跑一天休息一天，<strong>身体也需要时间来休息和恢复,切勿周末运动员模式，以为周一到周五不运动，周末两天运动3-4次就可以达到锻炼的效果 （实则是伤害身体）</strong></p>\n<h1 id=\"Replenishment\"><a href=\"#Replenishment\" class=\"headerlink\" title=\"Replenishment\"></a>Replenishment</h1><p><code>补水</code></p>\n<p>运动20 - 25 分钟补水一次，200~300/cc。</p>\n<h1 id=\"最后来张大合照，哈哈哈\"><a href=\"#最后来张大合照，哈哈哈\" class=\"headerlink\" title=\"最后来张大合照，哈哈哈\"></a>最后来张大合照，哈哈哈</h1><p><strong>谢谢百度的各位同学、色长^^的组织 和 NB 的赞助！！！ 赞~ </strong></p>\n<p><img src=\"https://lh3.googleusercontent.com/-g02TTH9PEP4/VZqno-MQG1I/AAAAAAAAAXo/E_IOXkRXF6o/s912/webwxgetmsgimg.jpg\" alt=\"合影\"></p>\n<h1 id=\"几篇关于跑步的文章\"><a href=\"#几篇关于跑步的文章\" class=\"headerlink\" title=\"几篇关于跑步的文章\"></a>几篇关于跑步的文章</h1><p>来源：百度跑协（微信公共号：BaiduRunClub）</p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=205479948&amp;idx=1&amp;sn=b2dbb012e2601dd49507ad61af546669&amp;scene=1&amp;key=c468684b929d2be24b51048ab620d339594198b0ebc1debd5c39880513facf9552cae7cb21cdf6a92d56cdf8512c75bc&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">你会跑步吗？</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=205279044&amp;idx=1&amp;sn=e5134145b5dc1b3637b352fb357ac27c&amp;scene=1&amp;key=c468684b929d2be2a25d8cbb3503e5bac09fd1d9106b8666d352c78695a28b70848b38d946c2b7320866af34305a5c45&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">长期跑步如何保护膝盖</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=207444409&amp;idx=1&amp;sn=f8e052b077673b841d0ff7c9385f2e05&amp;scene=1&amp;key=c468684b929d2be21442280e7f1fa1af2db4d3059993f26d3c72d0b43453ae6c875b0ef860c6bd01cf5fd1d26e96a23d&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">看漫画学减肥</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=205530867&amp;idx=1&amp;sn=c87e5cf0eb6ae8b0799e19b3e6520c7b&amp;scene=1&amp;key=c468684b929d2be2a25d8cbb3503e5bac09fd1d9106b8666d352c78695a28b70848b38d946c2b7320866af34305a5c45&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">跑者的力量训练</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=205656873&amp;idx=1&amp;sn=d8d40eba6c509e2cb074be7e264124b8&amp;scene=1&amp;key=c468684b929d2be2458d8500f097900948665579673adde1d8cae6d21d2d84e0fe912285ef3c8d5b9014feae30799dc9&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">如何使用泡沫轴来放松肌肉？</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=205911141&amp;idx=1&amp;sn=951abe743b50e34be471761b32bf28c4&amp;scene=1&amp;key=c468684b929d2be24973f4683b3fb7b66a40c3ba962dfce31d51a79d177c1e54bb89ffdd1d08e7f332c703b536a562d4&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">怎么吃都不胖的秘诀</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=206069102&amp;idx=1&amp;sn=157a05d5bba930cd6bf216f9bc3d5dea&amp;scene=1&amp;key=c468684b929d2be20ac99047f282c617df2e8c651def6ce23275c76e6a20e8c2c48ee6f217b99396283fa6c3bd3afe13&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">女生跑步会粗腿吗？</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=207183360&amp;idx=1&amp;sn=5f4138934f4fb15d9d67081f8f78c83d&amp;scene=1&amp;key=c468684b929d2be24844bfdf9bc1ba6324be03a1b400b132f0c40a7b1154cc1aff1d59c147be767d162920dd04f823df&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">初级跑步装备</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=207404736&amp;idx=1&amp;sn=c8c3e5382d504785166f921aa7ed6d5e&amp;scene=1&amp;key=c468684b929d2be287c138ca394ad3dd7d689f93169b106737562ce081cd892f5de6f0a8889910d36111d9f7423857e8&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">为什么健身房教练都不提倡做仰卧起坐？</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzA5NzA4NTQyNg==&amp;mid=207718173&amp;idx=1&amp;sn=f1c782ae1c11dfbe4ba7e1d4925eeef7&amp;scene=1&amp;key=c468684b929d2be2c72b74cd761fbe1e8035d8cf59ca6f354e7f2fb8326ed01879bfa95531f2594a2b346d52defd4c32&amp;ascene=1&amp;uin=MjkyMTc5NDgyMg%3D%3D&amp;devicetype=webwx&amp;version=70000001&amp;pass_ticket=e1CDq%2BAVPhOjHESp8dp8f%2Fydpdy2s4%2B4oUbpiA4P1twepIlPnOwoZm1kUrMPKtV9\" target=\"_blank\" rel=\"external\">Garmin跑步手表选购指南</a></p>\n","categories":["run"],"tags":["lsd"]},{"title":"九败一胜","url":"http://cloudkey.github.io/2015/11/08/nine-defeated-a-win/","content":"<p>[TOC]</p>\n<h2 id=\"在创业的黄金时代\"><a href=\"#在创业的黄金时代\" class=\"headerlink\" title=\"在创业的黄金时代\"></a>在创业的黄金时代</h2><p>1.本章开篇简单讲述了王兴从 校内 -&gt; 饭否 -&gt; 海内 -&gt; 美团的创业历程，王兴给人的感觉就是危机感很强。不仅是公司，个人也同样需要具备这样的<strong>危机意识</strong>，因为我们所处的行业、时代、世界变化太快。</p>\n<p>2.创业成功需要很多因素，如果有一个因素缺少或者做的不够好，那么创业失败的可能性就非常大。</p>\n<blockquote>\n<ul>\n<li>资金</li>\n<li>团队</li>\n<li>方向</li>\n<li>产品</li>\n<li>时机</li>\n<li>政治</li>\n</ul>\n</blockquote>\n<p>3.书中提到：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">现在是中国创业者最好的时代，互联网创业成本已经降到历史新低，带宽成本降低了，开源软件的发展也能减少项目所需的工程师的数量，软件的销售也可以放在电子商店里进行，产品推广可以利用社交平台与搜索引擎。</div></pre></td></tr></table></figure></p>\n<p><strong>市场上有足够的多的钱，创业者比过去更容易找到投资人。</strong></p>\n<p>4.本章读下来，觉得作者很用心写这本书，与美团的创业团队大部分高管与创始人进行过多次深入的<em>聊天</em>，总结了王兴10年的创业经验：</p>\n<blockquote>\n<ul>\n<li>过去的长期经验不是最重要的，<strong>快速学习能力</strong>是决定一个人发展现状以及未来前景的重要因素。 [这一条不仅是创业经验，也是个人发展的最好总结啊]</li>\n<li><strong>契约精神</strong> 尊重并且遵守大家共同定好的游戏规则 [做事做人诚信是基础]</li>\n<li>CEO不可替代的职责：设计公司未来的整体愿景与所有战略，确保传达给所有利益相关方。[领导者的眼光与平衡]</li>\n<li><strong>以身作则</strong> 不是塑造公司价值观的最好办法，而是唯一标准。[已所不欲勿施于人]</li>\n</ul>\n</blockquote>\n<a id=\"more\"></a>\n<h2 id=\"创业是更充实的生活方式\"><a href=\"#创业是更充实的生活方式\" class=\"headerlink\" title=\"创业是更充实的生活方式\"></a>创业是更充实的生活方式</h2><p>这一章前面讲述了王兴在美国看到了社交网络在美国流行起来的趋势，并立即找还在国内的室友王慧文商量此事。一个月后，回国创业。俩人开始想各种创业的点子，可穿戴(==那时候国外就已经有了？？==) -&gt; 定制T恤的网站，决定创业是必须要做的事。</p>\n<p>１、团队的重要性<br>年轻的创业者，合伙人一般是<strong>同学或者同事</strong>，接触频率高，了解彼此，其他关系很难建立起深厚的信任关系。</p>\n<blockquote>\n<ul>\n<li>小团队的时候，基于私人关系的<strong>信任</strong>很重要，只有彼此信任才能相互扶持，渡过难关。[确实是这样，小的创业团队基本都是认识的同学或者好朋友，大多数情况都是靠信任面对各种难关]</li>\n<li>但是，团队逐渐大了的时候，<strong>明确的游戏规则</strong>,<strong>共同的理念、价值观、梦想</strong>,才是维系团队的纽带。[游戏规则好理解，类似古代的赏罚分明；共同的理念梦想价值观，更多的可能是对一件事情的认可，以及愿意付出努力。]</li>\n</ul>\n</blockquote>\n<p>团队成员的组成：</p>\n<blockquote>\n<ul>\n<li>前端  </li>\n<li>后台</li>\n<li>关注外部世界的人 -&gt; ==否则创造出来的产品都是假象中的用户需求==</li>\n</ul>\n</blockquote>\n<p>但是创业中也有可能团队解散的可能，比如：团队成员每个人的<strong>抗风险能力</strong>是不一样的，有的人能抗很久但有的人抗不了太久。还有一个就是<strong>股权均等</strong>，有点类似大锅饭，这样也不行，必须==有能拍板的人==，就是大股东。这是游戏的规则，也是确立公司治理结构的重要依据。尊重游戏规则的理念，这个对团队来说非常重要，否则极易出现分歧后不可收拾。</p>\n<p>2、产品诞生之初<br>首先 <strong>杀手级应用</strong> 和 <strong>用户核心需求的功能</strong> 哪个对创业团队来说更重要？当然是先解决最迫切的需求，因为++其他的可以在用户使用中快速迭代、改善++。[解决难题也是一样，先击破核心阻碍，再解决其他的细枝末节]</p>\n<p>还有，<strong>用户行为挖掘</strong>。从一些用户的行为中，发现一些规律，找到原因，这个能让创业团队看清楚产品方向的价值型。就是做这件事情，是有价值的。</p>\n<p>最后，就是<strong>产品的推广</strong>。这个对第一批用户的增长至关重要，王兴他们想过和执行过很多推广手段，学生节抽门票 -&gt; 放假送同学去火车站 -&gt; 在校园贴海报 -&gt; 校园推广大使 -&gt; 赞助微电影植入广告等等。 一传十十传百，用户积累在悄然发生。</p>\n<p>3、资金危机<br>当巨头都涉足进来，跟你抢用户抢市场的时候(这时候自己也有用户基础了，各方面的开销也逐渐变大)，这时候资金补充就很重要了，<strong>融资</strong>是这一阶段的重中之重。[这阶段会跟各种投资人打交道，沟通，怎么样才能让投资人对自己有信心？ 自己必须对产品了然于心，产品盈利模式，推广手段都必须清楚，否则别人怎么可能相信你，自己如果都想不清楚，那别人就更不可能认可了。]</p>\n<p>4、最后本章给出了作者总结的创业经验和教训</p>\n<blockquote>\n<ul>\n<li><strong>分工明确</strong>，CEO一定要解放出来，关注业界、时代和社会的发展潮流。</li>\n<li>快速推广，不给对手留下反击时间。</li>\n<li>没有<strong>盲目的自我创新</strong>，学习别人的优点。[这个在创业初期很重要，用户体验必须要向一流产品靠近，快速学习别人的优点也可以节约成本。]</li>\n<li>要早一点接触<strong>资本</strong>，降低姿态，做一些妥协。[这点可能暂时还感受不深刻]</li>\n<li><strong>信任</strong>的一群小伙伴。唯有信任才能在遇到低潮的情况下，让团队依旧坚持稳固。[信任]</li>\n</ul>\n</blockquote>\n","categories":["read"],"tags":["entrepreneurship"]},{"title":"about","url":"http://cloudkey.github.io/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"http://cloudkey.github.io/category/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"http://cloudkey.github.io/link/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://cloudkey.github.io/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://cloudkey.github.io/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"http://cloudkey.github.io/tag/index.html","content":"","categories":[],"tags":[]}]